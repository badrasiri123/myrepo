---
-
 hosts: all
 become: false
 gather_facts: no
 tasks:
         - name: create credentials dir
           file:
                   path: /home/bader/street/credentials
                   state: directory
                   owner: bader
                   group: bader
                   recurse: yes
           become: true

         - name: create a user
           user:
                   name: "{{item}}"
                   password: "{{lookup ('password' , 'credentials/' + item + ' length=10') | password_hash('sha512')}}"                 
           become: true

           loop:
                   - maha
                   - ahmed
                   - jospeh
